* =============================================================
* LiFi-PV COMPLETE SYSTEM NETLIST
* Generated by Hardware-Faithful Simulator
* =============================================================
* LED:      OSRAM_LRW5SN
* Receiver: KXOB25-04X3F
* Distance: 0.325 m
* Temp:     300.0 K
* =============================================================
* LINK BUDGET:
*   P_tx  = 110.25 mW
*   P_rx  = 8088.57 µW
*   R_eff = 0.4408 A/W
*   I_ph  = 3565.10 µA
* =============================================================

.param freq=100k
.param I_ph_dc=3.565098e-03
.temp 26.9

* --- PV RECEIVER ---
* Photocurrent (from optical channel model)
I_signal N_pv GND PULSE(0 {I_ph_dc} 0 1n 1n {0.5/freq} {1/freq})

* Junction equivalent circuit
D1 N_pv N_d1 CELL_DIODE
D2 N_d1 N_d2 CELL_DIODE
D3 N_d2 N_out CELL_DIODE

.model CELL_DIODE D(Is=8.7367e-11 N=1.5 Cjo=266.24p)

R_shunt N_pv N_out 138800
C_parasitic N_out GND 1p
R_load N_out GND 1000

* --- MEASUREMENTS ---
.meas TRAN V_pk PP V(N_out)
.meas TRAN V_avg AVG V(N_out)

* --- ANALYSIS ---
.tran 0 {20/freq} 0 {0.01/freq} startup
.ac dec 200 1 1G

.backanno
.end
